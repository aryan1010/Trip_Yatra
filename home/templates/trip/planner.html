{% extends 'structure.home/html' %}
{% load static %}
{% block content %}
<div class="uk-section uk-section-primary uk-light">
    <div class="uk-container uk-container-small">
        <h1 class="uk-heading-medium uk-text-center">Create Your Dream Itinerary</h1>
        <p class="uk-text-lead uk-text-center">Plan your perfect journey with us</p>
    </div>
</div>

<div class="uk-section uk-section-muted">
    <div class="uk-container uk-container-small">
        <div class="uk-card uk-card-default uk-card-body uk-box-shadow-large">
            <form method="POST" action="{% url 'itinerary' %}" class="uk-form-stacked">
                {% csrf_token %}

                <div class="uk-grid-medium" uk-grid>
                    <div class="uk-width-1-2@s">
                        <label class="uk-form-label" for="{{ form.username.id_for_label }}">Username</label>
                        <div class="uk-form-controls">
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon" uk-icon="icon: user"></span>
                                <input class="uk-input" id="{{ form.username.id_for_label }}" type="text" name="{{ form.username.name }}" value="{{ request.user.username }}" readonly="readonly"/>
                            </div>
                        </div>
                        {% if form.username.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.username.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="uk-width-1-2@s">
                        <label class="uk-form-label" for="{{ form.budget.id_for_label }}">Budget (INR)</label>
                        <div class="uk-form-controls">
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon" uk-icon="icon: credit-card"></span>
                                <input class="uk-input" id="{{ form.budget.id_for_label }}" type="number" name="{{ form.budget.name }}" placeholder="Enter your budget" value="{{ form.budget.value }}"/>
                            </div>
                        </div>
                        {% if form.budget.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.budget.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                <div class="uk-grid-medium uk-margin" uk-grid>
                    <div class="uk-width-1-2@s">
                        <label class="uk-form-label" for="{{ form.from_address.id_for_label }}">From</label>
                        <div class="uk-form-controls">
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon" uk-icon="icon: location"></span>
                                <input class="uk-input" id="{{ form.from_address.id_for_label }}" type="text" name="{{ form.from_address.name }}" placeholder="City, State, Country" value="{{ form.from_address.value }}"/>
                            </div>
                        </div>
                        {% if form.from_address.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.from_address.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="uk-width-1-2@s">
                        <label class="uk-form-label" for="{{ form.to_address.id_for_label }}">To</label>
                        <div class="uk-form-controls">
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon" uk-icon="icon: location"></span>
                                <input class="uk-input" id="{{ form.to_address.id_for_label }}" type="text" name="{{ form.to_address.name }}" placeholder="City, State, Country" value="{{ form.to_address.value }}"/>
                            </div>
                        </div>
                        {% if form.to_address.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.to_address.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                <div class="uk-grid-medium uk-margin" uk-grid>
                    <div class="uk-width-1-2@s">
                        <label class="uk-form-label" for="{{ form.from_date.id_for_label }}">From Date</label>
                        <div class="uk-form-controls">
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon" uk-icon="icon: calendar"></span>
                                <input class="uk-input" id="{{ form.from_date.id_for_label }}" type="date" name="{{ form.from_date.name }}" value="{{ form.from_date.value }}"/>
                            </div>
                        </div>
                        {% if form.from_date.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.from_date.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="uk-width-1-2@s">
                        <label class="uk-form-label" for="{{ form.to_date.id_for_label }}">To Date</label>
                        <div class="uk-form-controls">
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon" uk-icon="icon: calendar"></span>
                                <input class="uk-input" id="{{ form.to_date.id_for_label }}" type="date" name="{{ form.to_date.name }}" value="{{ form.to_date.value }}"/>
                            </div>
                        </div>
                        {% if form.to_date.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.to_date.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                <div class="uk-grid-medium uk-margin" uk-grid>
                    <div class="uk-width-1-3@s">
                        <label class="uk-form-label" for="{{ form.adults.id_for_label }}">Adults</label>
                        <div class="uk-form-controls">
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon" uk-icon="icon: user"></span>
                                <input class="uk-input" id="{{ form.adults.id_for_label }}" type="number" name="{{ form.adults.name }}" placeholder="Number of adults" value="{{ form.adults.value }}"/>
                            </div>
                        </div>
                        {% if form.adults.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.adults.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="uk-width-1-3@s">
                        <label class="uk-form-label" for="{{ form.children.id_for_label }}">Children</label>
                        <div class="uk-form-controls">
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon" uk-icon="icon: user"></span>
                                <input class="uk-input" id="{{ form.children.id_for_label }}" type="number" name="{{ form.children.name }}" placeholder="Number of children" value="{{ form.children.value }}"/>
                            </div>
                        </div>
                        {% if form.children.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.children.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="uk-width-1-3@s">
                        <label class="uk-form-label" for="{{ form.travel_companion.id_for_label }}">Travel Companion</label>
                        <div class="uk-form-controls">
                            <div class="uk-grid-small uk-child-width-auto uk-grid">
                                <div class="uk-width-expand">
                                    <select class="uk-select" id="{{ form.travel_companion.id_for_label }}" name="{{ form.travel_companion.name }}">
                                        <option value="family">Family</option>
                                        <option value="friends">Friends</option>
                                        <option value="partner">Partner</option>
                                        <option value="solo">Solo</option>
                                        <option value="doesnt_matter">Doesn't Matter</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        {% if form.travel_companion.errors %}
                            <div class="uk-alert-danger" uk-alert>{{ form.travel_companion.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                <div class="uk-margin">
                    <label class="uk-form-label">Travel Experience Preference</label>
                    <div class="uk-grid-small uk-child-width-1-2 uk-child-width-1-3@s uk-text-center" uk-grid>
                        <div>
                            <div class="uk-card uk-card-default uk-card-body preference-card">
                                <label class="uk-display-block uk-link-toggle">
                                    <input class="uk-checkbox uk-hidden" type="checkbox" name="{{ form.preferences.name }}" value="adventure">
                                    <img src="{% static 'adven.jpg' %}" alt="Adventure" class="uk-width-1-1">
                                    <div class="uk-margin-small-top">Adventure</div>
                                </label>
                            </div>
                        </div>
                        <div>
                            <div class="uk-card uk-card-default uk-card-body preference-card">
                                <label class="uk-display-block uk-link-toggle">
                                    <input class="uk-checkbox uk-hidden" type="checkbox" name="{{ form.preferences.name }}" value="adventure">
                                    <img src="{% static 'culty.jpg' %}" alt="Culture" class="uk-width-1-1">
                                    <div class="uk-margin-small-top">Culture</div>
                                </label>
                            </div>
                            
                            <style>
                                .preference-card {
                                    padding: 0; /* Remove any padding */
                                    margin: 0; /* Remove any margin if needed */
                                    overflow: hidden; /* Ensure content doesn't overflow */
                                    height: 100%; /* Make sure the card takes full height */
                                    position: relative;
                                }
                            
                                .uk-link-toggle img {
                                    transition: transform 0.3s ease; /* Smooth transition for scale effect */
                                }
                            
                                .uk-link-toggle:hover img {
                                    transform: scale(1.1); /* Enlarge image on hover */
                                }
                            
                                .uk-link-toggle:hover .uk-overlay {
                                    opacity: 1; /* Make overlay visible on hover */
                                }
                            </style>
                            
                        </div>
                        <div>
                            <div class="uk-card uk-card-default uk-card-body preference-card">
                                <label class="uk-display-block uk-link-toggle">
                                    <input class="uk-checkbox uk-hidden" type="checkbox" name="{{ form.preferences.name }}" value="nature">
                                    <img src="{% static 'nat.jpg' %}" alt="Nature" class="uk-width-1-1">
                                    <div class="uk-margin-small-top">Nature</div>
                                </label>
                            </div>
                        </div>
                        <div>
                            <div class="uk-card uk-card-default uk-card-body preference-card">
                                <label class="uk-display-block uk-link-toggle">
                                    <input class="uk-checkbox uk-hidden" type="checkbox" name="{{ form.preferences.name }}" value="relaxation">
                                    <img src="{% static 'relax.jpg' %}" alt="Relaxation" class="uk-width-1-1">
                                    <div class="uk-margin-small-top">Relaxation</div>
                                </label>
                            </div>
                        </div>
                        <div>
                            <div class="uk-card uk-card-default uk-card-body preference-card">
                                <label class="uk-display-block uk-link-toggle">
                                    <input class="uk-checkbox uk-hidden" type="checkbox" name="{{ form.preferences.name }}" value="food">
                                    <img src="{% static 'fud.jpg' %}" alt="Food" class="uk-width-1-1">
                                    <div class="uk-margin-small-top">Food</div>
                                </label>
                            </div>
                        </div>
                        <div>
                            <div class="uk-card uk-card-default uk-card-body preference-card">
                                <label class="uk-display-block uk-link-toggle">
                                    <input class="uk-checkbox uk-hidden" type="checkbox" name="{{ form.preferences.name }}" value="luxury">
                                    <img src="{% static 'lux.jpg' %}" alt="Luxury" class="uk-width-1-1">
                                    <div class="uk-margin-small-top">Luxury</div>
                                </label>
                            </div>
                        </div>
                    </div>
                    {% if form.preferences.errors %}
                        <div class="uk-alert-danger" uk-alert>{{ form.preferences.errors }}</div>
                    {% endif %}
                </div>

                <div class="uk-margin">
                    <label class="uk-form-label" for="{{ form.special_requests.id_for_label }}">Special Requests</label>
                    <div class="uk-form-controls">
                        <textarea class="uk-textarea" id="{{ form.special_requests.id_for_label }}" rows="5" name="{{ form.special_requests.name }}" placeholder="Enter any special requests (Write NA if none)">{{ form.special_requests.value }}</textarea>
                    </div>
                    {% if form.special_requests.errors %}
                        <div class="uk-alert-danger" uk-alert>{{ form.special_requests.errors }}</div>
                    {% endif %}
                </div>

                <div class="uk-margin">
                    <button type="submit" class="uk-button uk-button-primary uk-width-1-1 uk-margin-small-bottom">Generate Itinerary</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', (event) => {
    const preferenceCards = document.querySelectorAll('.preference-card');
    preferenceCards.forEach(card => {
        card.addEventListener('click', function(e) {
            e.preventDefault();
            this.classList.toggle('uk-card-primary');
            const checkbox = this.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
        });
    });
});
</script>
{% endblock %}